<% include ../partials/header %>

<!--Include a style to remove the body padding needed for the nav bar, so the map is flush with the top of the page-->
<style>
    body {
        padding-top: 56px;
    }
</style>

<div class="container">
    <% if(currentUser && currentUser.isAdmin){ %>
        <h1>You're an admin!</h1>
    <% } %>
</div>
    
<!-- MAP SECTION START -->
<div class="mb-3" id="activity-index-map"></div>
<!-- MAP SECTION END -->


<!-- MAP SEARCH START -->
<div class="container d-flex flex-wrap align-items-start mb-1 justify-content-between">
    
    <div class='col-lg-5 mb-1 nopadding'>
        <div class="input-group align-items-baseline mb-2">
            <label for="location">Find Activities</label>
            <input id='setLocationInput' class="form-control ml-2" type="text" name="location" placeholder="Where are you?">
            <div class="input-group-append">
                <button id='findNearMeClearBtn' class="btn btn-outline-secondary" type="button" style="display: none;"><i class="fa fa-times"></i></button>
                <button id='findNearMeBtn' class="btn btn-success" type="button">Find</button>
            </div>
        </div>

        <div class="collapse" id="collapseDistanceSearch">
            <div class="nopadding input-group align-items-baseline mb-2 col-lg-8 col-md-8 col-sm-10">
              <label for="distance">Distance (Miles)</label>
              <input id='setDistanceInput' type="number" name="distance" class="form-control ml-1" placeholder="E.g. 20" min="1" max="50">
              <div class="input-group-append">
                <button id='setDistanceMinusBtn' class="btn btn-outline-primary" type="button"><i class="fa fa-minus"></i></button>
                <button id='setDistancePlusBtn' class="btn btn-outline-success" type="button"><i class="fa fa-plus"></i></button>
              </div>
            </div>
        </div>
    </div>
    
    <div class="input-group align-items-baseline mb-2 col-lg-6 nopadding"> <!-- Use 6 for search and 5 for the loaction box, then use justify-content-between to create a gap on large screens-->
        <label for="search">Search Activities</label>
        <input id='searchQueryInput' class="form-control ml-2" type="text" name="search" placeholder="e.g. camping">
        <div class="input-group-append">
            <button id='searchQueryClearBtn' class="btn btn-outline-secondary" type="button" style="display: none;"><i class="fa fa-times"></i></button>
            <button id='searchQueryBtn' class="btn btn-success" type="button">Search</button>
        </div>
    </div>
    
    
    <!-- Reset search and more filters buttons div -->
    <div class="d-flex flex-wrap align-items-start col-12 nopadding">
        <div class="col nopadding col-md-9 col-7 mb-2">
            <button id='moreFiltersBtn' class="btn btn-outline-info btn-block">Refine Search <i class="fa fa-arrow-down"></i></button>
        </div>
        <div class="col nopadding col-md-3 col-5 d-flex ">
            <button id='resetSearchBtn' class="btn btn-outline-primary btn-block ml-3 mb-2" onclick="resetSearch()">Reset Search</button>
        </div>
    </div>
    
    <!-- More filters collapsible div-->
    <div class="collapse col-12 nopadding" id="collapseMoreFilters">
        <div class="alert alert-primary mt-2 text-center" role="alert">
            Sorry, we're still building this feature ðŸ›  we'll have it ready as soon as possible!
        </div>
    </div>

</div>
<!-- MAP SEARCH END -->

<!--NUMBER OF ACTIVITIES FOUND SHOW MESSAGE HERE-->
<div class="container nopadding">
    <div class="d-flex justify-content-center nopadding">
        <div class="col-lg-4 col-md-5 col-sm-6">
            <div id="numActivitiesFoundMessage" class="alert alert-success text-center" role="alert" style="display: none;">
            
            </div>
        </div>
    </div>
</div>

<!--IF NO ACTIVITIES FOUND SHOW MESSAGE HERE-->
<div class="container">
    <div>
        <div id="noActivitiesFoundMessage" class="alert alert-info text-center" role="alert" style="display: none;">
        
        </div>
    </div>
</div>

<!-- GENERATE ACTIVITY GRID WITH AJAX-->
<div class="container">
    <div class="row text-center grid" id="activity-grid">
        
    </div>

    <div class="d-flex justify-content-center row text-center">
        <div class="col-md-6 mb-4">
            <button id="loadMoreBtn" type="button" class="btn btn-success btn-block">Load more <i class="fa fa-arrow-down"></i></button>
        </div>
    </div>
    
</div>


<!-- Need to fix this async defer to make sure the loading is in the correct order -->

<!-- Masonry Image Scripts-->
<script src="/js/lib/masonry.pkgd.min.js"></script>

<script src="/js/activityIndex/activityIndex.js"></script>
<script src="/js/activityIndex/mapIndex.js"></script>
<script defer src="/js/activityIndex/searchIndex.js"></script>

<script async defer src="https://maps.googleapis.com/maps/api/js?v=3.32&key=<%= process.env.MAPPING_API_KEY %>&callback=initActivityIndexMap"></script>

<% include ../partials/footer %>